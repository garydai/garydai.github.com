---
date: 2021-12-08
layout: default
title: atomikos



---

# atomikos

TransactionEssentials：开源的免费产品

ExtremeTransactions：上商业版，需要收费。

![image-20211208122451428](/Users/daitechang/Downloads/garydai.github.com/_posts/pic/image-20211208122451428.png)

**TransactionEssentials：**

1、实现了JTA/XA规范中的事务管理器(Transaction Manager)应该实现的相关接口，如：

   UserTransaction实现是com.atomikos.icatch.jta.UserTransactionImp，用户只需要直接操作这个类

   TransactionManager实现是com.atomikos.icatch.jta.UserTransactionManager

   Transaction实现是com.atomikos.icatch.jta.TransactionImp

2、针对实现了JDBC规范中规定的实现了XADataSource接口的数据库连接池，以及实现了JMS规范的MQ客户端提供一层封装。

   在上一节我们讲解JTA规范时，提到过XADataSource、XAConnection等接口应该由资源管理器RM来实现，而Atomikos的作用是一个事务管理器(TM)，并不需要提供对应的实现。而Atomikos对XADataSource进行封装，只是为了方便与事务管理器整合。封装XADataSource的实现类为`AtomikosDataSourceBean`。典型的XADataSource实现包括：

  1、mysql官方提供的com.mysql.jdbc.jdbc2.optional.MysqlXADataSource

  2、阿里巴巴开源的druid连接池，对应的实现类为com.alibaba.druid.pool.xa.DruidXADataSource

  3、tomcat-jdbc连接池提供的org.apache.tomcat.jdbc.pool.XADataSource

  而其他一些常用的数据库连接池，如dbcp、dbcp2或者c3p0，目前貌似尚未提供XADataSource接口的实现。如果提供给AtomikosDataSourceBean一个没有实现XADataSource接口的数据源，如c3p0的ComboPooledDataSource，则会抛出类似以下异常： 

```html
com.atomikos.jdbc.AtomikosSQLException: The class 'com.mchange.v2.c3p0.ComboPooledDataSource' specified by property 'xaDataSourceClassName' does not implement the required interface   javax.jdbc.XADataSource.   Please make sure the spelling is correct, and check your JDBC driver vendor's documentation.
```

## 参考

http://www.tianshouzhi.com/api/tutorials/distributed_transaction/386