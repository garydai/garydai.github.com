---
date: 2017-2-25
layout: default

title: 分布式系统的事务处理

---

# 分布式系统的事务处理


CAP理论：一致性，可用性，分区容忍性，你只可能要其中的两个。


Master-Slave

Master-Master

Two/Three Phase Commit

Two Generals Problem（两将军问题）

试图通过建立在一个不可靠的连接上的交流来协调一项行动的隐患和设计上的巨大挑战。



## 分布式事务

当P存在时，分布式事务选择的占比为：C=100，A=0。

## 分布式一致性算法

当P存在的条件下，兼顾C和A。分布式事务描绘的多个系统间的一致性，而这里的分布式一致性算法则是描绘单个系统内部节点之间的一致性。随着 C 和 A 的倾斜不同，也出现了多样的分布式一致性算法。

想要可用性，那么节点间数据复制不能少。节点间的数据复制分为三种：

- 主从复制
- 主主复制
- 无主复制

## 分布式共识机制

主从复制中提到了，当主节点挂掉后，我想自动切换新的主节点怎么办？这就涉及到了共识算法（还有另外的实现方式，比如利用VIP漂移等），利用共识算法实现节点间新主节点的选举，可以实现自动切换。

而对于主主复制和无主复制来说，共识算法所能提供的一致性保证更好。

常见共识算法有：Paxos、Raft、Zab等

## 参考

http://coolshell.cn/articles/10910.html

https://oatlmy.blog.csdn.net/article/details/108631078






​    

